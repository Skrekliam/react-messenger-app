(this["webpackJsonpmessenger-app"]=this["webpackJsonpmessenger-app"]||[]).push([[0],{20:function(e,t,n){},21:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var c=n(7),a=n.n(c),s=n(15),r=n.n(s),u=(n(20),n(9)),i=(n(21),n(3)),o=function(e){var t=e.connect,n=Object(c.useState)(""),a=Object(u.a)(n,2),s=a[0],r=a[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)("input",{type:"text",placeholder:"Enter name",value:s,onChange:function(e){return r(e.target.value)}}),Object(i.jsx)("button",{disabled:!s,onClick:function(){return t(s)},children:"Connect"})]})},j=function(e){var t=e.createChat,n=e.users,a=Object(c.useState)(""),s=Object(u.a)(a,2),r=s[0],o=s[1],j=Object(c.useState)(""),d=Object(u.a)(j,2),b=d[0],l=d[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)("h3",{children:"Create chat"}),Object(i.jsx)("p",{children:"Enter chat name, and choose recipient for your char"}),Object(i.jsx)("input",{placeholder:"Chat name",value:r,onChange:function(e){return o(e.target.value)}}),Object(i.jsx)("select",{onChange:function(e){return l(e.target.value)},placeholder:"select",children:n.map((function(e){return Object(i.jsx)("option",{value:e,children:e},e)}))}),Object(i.jsxs)("p",{children:["Chat name: ",Object(i.jsx)("b",{children:r}),", recipient ",Object(i.jsx)("b",{children:b})]}),Object(i.jsx)("button",{onClick:function(){return t(b,r)},disabled:!b||!r,children:"Create chat"})]})},d=function(e){var t=e.myActiveChats,n=e.setCurrentChat;return Object(i.jsx)("div",{children:t.map((function(e){return Object(i.jsx)("div",{onClick:function(){return n(e)},children:e.split("<id!45@")[0]})}))})},b=n(11),l=function(e,t){b.a.database().ref(e).on("value",(function(e){e.val()&&t(e.val())}))},h=function(e,t){b.a.database().ref(e).set(t)},O=function(){var e=Object(c.useState)(null),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(null),r=Object(u.a)(s,2),i=r[0],o=r[1];Object(c.useEffect)((function(){j()}),[]);var j=function(){l("/users",(function(e){o(Object.keys(e))}))};return[n,i,function(e){h("/users/".concat(e),!0),a(e)}]},f={apiKey:"AIzaSyAxMYQywHkja7mjXDctTfok8VJo33wE7Wc",authDomain:"messaging-ba2cd.firebaseapp.com",databaseURL:"https://messaging-ba2cd-default-rtdb.europe-west1.firebasedatabase.app",projectId:"messaging-ba2cd",storageBucket:"messaging-ba2cd.appspot.com",messagingSenderId:"881813971262",appId:"1:881813971262:web:14d2173b18a2ceb3fc0c6f"},g=function(e){var t=e.messages,n=void 0===t?[]:t,a=e.sendMessage,s=e.currentChat,r=e.userId,o=e.users,j=e.addUser,d=Object(c.useState)(""),b=Object(u.a)(d,2),l=b[0],h=b[1],O=n.sort((function(e,t){return new Date(e.created).valueOf()-new Date(t.created).valueOf()}));return Object(i.jsxs)("div",{children:[Object(i.jsx)("div",{className:"messages",children:O.map((function(e,t){return Object(i.jsxs)("p",{className:r===e.sender?"myMessage":"otherMessage",children:[e.sender,": ",e.body]},t)}))}),Object(i.jsxs)("div",{className:"send-message",children:[Object(i.jsx)("textarea",{value:l,onChange:function(e){return h(e.target.value)},className:"text-entry"}),Object(i.jsx)("button",{className:"submit",onClick:function(){a(s,l),h("")},children:"Submit"}),Object(i.jsx)("select",{onChange:function(e){return j(e.target.value,s)},value:"select",children:o.map((function(e){return Object(i.jsx)("option",{value:e,children:e},e)}))})]})]})},p=n(28),v=function(e){var t=Object(c.useState)(null),n=Object(u.a)(t,2),a=n[0],s=n[1],r=Object(c.useState)([]),i=Object(u.a)(r,2),o=i[0],j=i[1],d=Object(c.useState)([]),b=Object(u.a)(d,2),O=b[0],f=b[1];Object(c.useEffect)((function(){l("/".concat(e,"/chats"),(function(e){j(Object.keys(e))})),l("/chats/".concat(a,"/messages"),(function(e){f(Object.values(e))}))}),[a,e]);return{addUser:function(e,t){h("/".concat(e,"/chats/").concat(t),t)},sendMessage:function(t,n){var c=Object(p.a)();h("/chats/".concat(t,"/messages/").concat(c),{body:n,sender:e,created:(new Date).toISOString()})},createChat:function(t,n){var c="".concat(n,"<id!45@").concat(Object(p.a)());h("/".concat(t,"/chats/").concat(c),c),h("/".concat(e,"/chats/").concat(c),c),h("/chats/".concat(c,"/messages"),{}),s(c)},currentChat:a,myActiveChats:o,currentChatMessages:O,setCurrentChat:s}};var m=function(){b.a.apps.length?b.a.app():b.a.initializeApp(f);var e=O(),t=Object(u.a)(e,3),n=t[0],c=t[1],a=t[2],s=v(n),r=s.myActiveChats,l=s.setCurrentChat,h=s.createChat,p=s.sendMessage,m=s.currentChat,C=s.currentChatMessages,x=s.addUser;return Object(i.jsx)(i.Fragment,{children:n?Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)("p",{style:{color:"green"},children:["Connected as: ",n]}),Object(i.jsx)("div",{className:"ActiveChats",children:Object(i.jsx)(d,{setCurrentChat:l,myActiveChats:r})}),Object(i.jsx)("div",{className:"CreateChat",children:Object(i.jsx)(j,{createChat:h,users:c.filter((function(e){return e!==n}))})}),Object(i.jsx)("div",{className:"CurrentChat",children:m&&Object(i.jsx)(g,{sendMessage:p,currentChat:m,messages:C,userId:n,users:c.filter((function(e){return e!==n})),addUser:x})})]}):Object(i.jsx)(o,{connect:a})})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,29)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};r.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(m,{})}),document.getElementById("root")),C()}},[[26,1,2]]]);
//# sourceMappingURL=main.cb4953f4.chunk.js.map